<!DOCTYPE html>
<html>
	<head>
		<title></title>
		<meta content="">
		
		<!-- Bootstrap 3.3.6 -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
		
		<!-- Font Awesome Icons -->
		<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
		
		
		<!-- Taskpaper Style -->
		<link href="./taskpaper.css" rel="stylesheet" type="text/css" />
		<style>
			#application { max-width: 950px; text-align: left; }
			
			div.taskpaper, textarea.taskpaper { width: 100%; max-width: 700px; min-height: 200px; border: 1px solid rgba(128,128,128,0.4); margin: 0; padding: 7px; overflow-y: scroll; overflow-x: hidden; resize: none; }
			
			.active { color: red; }
			
			.menu { width: 220px; float: right; margin: 0 10px 0 0; padding: 0; border: 1px solid #BBB; }
			.menu li, .menu ul, .menu ol { list-style-type: none; margin: 0; padding: 3px; }
			.menu li:hover { background: rgba(128,128,128,0.1); }
			.menu li.divider { height: 1px; border-top: 1px solid #BBB; margin: 7px 0; background: inherit; }
			.menu li span { color: #999; font-size: 9pt; float: right; }
			.menu a, .menu a:hover { text-decoration: none; color: #333; }
		</style>
		
	</head>
	<body>
		<center><div id="application">
		<div class="menu">
			<h3 style="text-align: center; text-shadow: 0 0 5px #BBB;">&#941;&#961;&#947;&#959; <!-- ergo --></h3>
			<ul>
				<li><a href="#"><i class="fa fa-fw fa-dashboard"></i> Dashboard</a></li>
				<li><a href="#"><i class="fa fa-fw fa-calendar"></i> Calendar</a></li>
				<li><a href="#"><i class="fa fa-fw fa-bar-chart"></i> Progress-Rapport</a></li>
				<li class="divider"></li>
				<li><a href="#"><i class="fa fa-fw fa-sitemap"></i> Projects</a></li>
				<li><a href="#"><i class="fa fa-fw fa-tasks"></i> Tasks</a></li>
					<li><a href="#"><i class="fa fa-fw fa-bell-o"></i> Tickets</a></li>
				<li class="divider"></li>
				<li><a href="#"><i class="fa fa-fw fa-users"></i> Contacts</a> <span>(Heracles+)</span></li>
				<li><a href="#"><i class="fa fa-fw fa-comments-o"></i> Discussion</a> <span>(Echo)</span></li>
				<li><a href="#"><i class="fa fa-fw fa-tags"></i> Lables</a> <span>(Tags)</span></li>
				<li class="divider"></li>
				<li><a href="#"><i class="fa fa-fw fa-user"></i> Profile</a> <span>(Heracles)</span></li>
				<li><a href="#"><i class="fa fa-fw fa-gears"></i> Configuration</a></li>
				<li><a href="#"><i class="fa fa-fw fa-folder-open-o"></i> Filesystem</a></li>
			</ul>
		</div>
		<div id="taskpaper" class="taskpaper editable sortable"></div>
			
			<br/>
			    <label class="switch"><input id="switch_taskpaper" class="switch-input" type="checkbox" onChange="$('#taskpaper').toggleClass('taskpaper').toggleClass('non-taskpaper');" /><span class="switch-label" data-on="Taskpaper" data-off="HTML"></span><span class="switch-handle"></span></label>
			    <label class="switch"><input id="switch_clean" class="switch-input" type="checkbox" onChange="$('#taskpaper').toggleClass('clean');" /><span class="switch-label" data-on="Clean" data-off="View All"></span><span class="switch-handle"></span></label>
			    <label class="switch"><input id="switch_editable" class="switch-input" type="checkbox" onChange="$('#taskpaper').toggleClass('editable');" /><span class="switch-label" data-on="Editable" data-off="Fixed"></span><span class="switch-handle"></span></label>
			    <label class="switch"><input id="switch_sortable" class="switch-input" type="checkbox" onChange="$('#taskpaper').toggleClass('sortable');" /><span class="switch-label" data-on="Sortable" data-off="Static"></span><span class="switch-handle"></span></label>
			
			<br/><br/>
			
			<strong>Editor:</strong><br/>
		<textarea id="taskpaper_raw" class="taskpaper tabable direct" onchange="$('#taskpaper').html( taskpaper_html_build(taskpaper_txt_analyse($('#taskpaper_raw').val())) );">Taskpaper-app:
Hieronder vind je de verschillende stadia die in de ontwikkeling van deze concept-app doorlopen dienen te gaan worden voordat er van een volwaardige applicatie sprake kan zijn.
txt&gt;html: @done
- txt_analyse @done(2016-04-19)
- build @done(2016-04-19)
- analyseer tags @done
	- postfix tags @done(2016-04-20)
	- inline tags @done(2016-04-21)
	- urls @done(2016-04-21)
- markdown @done
	- bold @done(2016-04-21)
	- italic @done(2016-04-21)
	- underscore @done(2016-04-21)
	- code backtick @done(2016-04-26)
html&gt;txt:
- html_analyse @done(2016-04-26;native js approach) @bug(2016-04-25;jQuery approach)
- save / push-back to textarea
html editor:
- implement the `done` tag @done(2016-04-20)
- edit text @icon(edit) of item
- move @icon(bars) li @sortable
- remove li @done(2016-04-21)
- make the html keyboard aware
	- use `[arrow up]` and   `[arrow down]` to select previous/next item
	- change indentation of current item with `[tab]` and `[shift][tab]`
- add child item on `[enter]`
	- create item by @icon(plus-circle) form
- change item type (/project/, /task/, /note/)
- enable @icon(edit) WYSIWYG text editing on item lines
	- implement `&lt;strong&gt;, &lt;em&gt;, &lt;u&gt;, &lt;code&gt;, &lt;a href=""&gt;, @icon, @tag `
[bubble.js](http://xltrace.nl/bubbel.js/):
- implement [.taskpaper] with /.editable/ and /.sortable/ e.g.
&#941;&#961;&#947;&#959; Application:
- [FSnode](#) filesystem layer
	- write FSnode::dropbox and FSnode::google_drive @featurerequest
- build *@icon(sitemap) projects*
	- include taskpaper-files into a project
	- define a project by adding @id(#) and enabling @project(#/name) references
- implement standardized *@icon(tags) labels*.
	Like @don(e{date=now}), with e.g. @created({date};{user}), @assigned({user}), @estimated({period}) and several @milestone({date}) tags.
- remap the `{date}`-aware tags into the *@icon(calendar) calendar* as alternative view
- add module for *@icon(comments-o) discussion*: "[Echo](#)" @featurerequest
- implement a *@icon(bell-o) ticket*-system to a particular taskpaper document, with ability of adding the ticket from external contacts (by email-address) @featurerequest @require("Echo")
	- with identification of real users @capcha @spamfilter
- generate the @today , @urgent , and @tomorrow *@icon(tasks) task-views* @featurerequest
- generate *@icon(bar-chart) progress-reports* @featurerequest</textarea>
			<br/>
			    <label class="switch"><input id="switch_tabable" class="switch-input" type="checkbox" onChange="$('#taskpaper_raw').toggleClass('tabable');" /><span class="switch-label" data-on="Tab" data-off="none"></span><span class="switch-handle"></span></label>
			    <label class="switch"><input id="switch_direct" class="switch-input" type="checkbox" onChange="$('#taskpaper_raw').toggleClass('direct');" /><span class="switch-label" data-on="Direct" data-off="passive"></span><span class="switch-handle"></span></label>
			
			<br/>
			<button onClick="console.dir( taskpaper_txt_analyse($('#taskpaper_raw').val()) );">txt Analyse</button>
			<button onClick="alert( taskpaper_txt_build(taskpaper_txt_analyse($('#taskpaper_raw').val())) );">txt2txt</button>
			<button onClick="alert($('#taskpaper_raw').val().length);">txt length</button> 
			<button onClick="$('#taskpaper').html( taskpaper_html_build(taskpaper_txt_analyse($('#taskpaper_raw').val())) );">txt2html</button>
			<button onClick="$('#taskpaper_raw').val(taskpaper_txt_build( taskpaper_html_analyse(document.getElementById('taskpaper')) ));">html2txt</button>
			<!-- /*$('#taskpaper').innerHTML = */  -->
			
			<!-- <br/><br/><div id="debug" class="taskpaper editable"></div> -->
	
	</div></center>
	</body>
	
	

	<!-- jQuery 2.1.4 -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<!-- script>if (typeof jQuery === 'undefined') {
	  document.write(unescape('%3Cscript%20src%3D%22../jquery/jquery-2.1.4.min.js%22%3E%3C/script%3E'));
	}
	</script -->
	<!-- Bootstrap 3.3.6 JS -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

	<script src="./taskpaper.js"></script>
	
	<!-- https://johnny.github.io/jquery-sortable/ -->
	<!--
	<script src="https://johnny.github.io/jquery-sortable/js/jquery-sortable.js"></script>
	<script>
		function makesortable(obj){
			var oldContainer;
			obj.sortable({
				  group: 'nested',
				  itemSelector: 'li',
				  afterMove: function (placeholder, container) {
					if(oldContainer != container){
					  if(oldContainer)
						oldContainer.el.removeClass("active");
					  container.el.addClass("active");

					  oldContainer = container;
					}
				  },
				  onDrop: function ($item, container, _super) {
					container.el.removeClass("active");
					_super($item, container);
				  }
				});
		}
		$(function() {
			//$("#taskpaper > ul").sortable();
			makesortable( $("#taskpaper > ul") );
		});
	</script>
	<style>
	body.dragging, body.dragging * {
	  cursor: move !important;
	}

	.dragged {
	  position: absolute;
	  opacity: 0.5;
	  z-index: 2000;
	}

	ol.example li.placeholder {
	  position: relative;
	  /** More li styles **/
	}
	ol.example li.placeholder:before {
	  position: absolute;
	  /** Define arrowhead **/
	}
	</style>
	-->
	
	<script>
	$(document).delegate('.tabable', 'keydown', function(e) {
	  var keyCode = e.keyCode || e.which;

	  if (keyCode == 9) {
		e.preventDefault();
		var start = $(this).get(0).selectionStart;
		var end = $(this).get(0).selectionEnd;

		// set textarea value to: text before caret + tab + text after caret
		$(this).val($(this).val().substring(0, start)
					+ "\t"
					+ $(this).val().substring(end));

		// put caret at right position again
		$(this).get(0).selectionStart =
		$(this).get(0).selectionEnd = start + 1;
	  }
	});
	$(document).delegate('.direct', 'keydown', function(e) {
	  var keyCode = e.keyCode || e.which;
	  $(this).change();
	});
	</script>
		
	<link href="./switch.css" rel="stylesheet" type="text/css" />
	<script>
		/* moved to after loading jquery */
		$(function(){
			$('#switch_taskpaper').prop('checked', $('#taskpaper').hasClass('taskpaper') );
			$('#switch_clean').prop('checked', $('#taskpaper').hasClass('clean') );
			$('#switch_editable').prop('checked', $('#taskpaper').hasClass('editable') );
			$('#switch_sortable').prop('checked', $('#taskpaper').hasClass('sortable') );
			$('#switch_tabable').prop('checked', $('#taskpaper_raw').hasClass('tabable') );
			$('#switch_direct').prop('checked', $('#taskpaper_raw').hasClass('direct') );
			
			$('#taskpaper').html( taskpaper_html_build(taskpaper_txt_analyse($('#taskpaper_raw').val())) );
		});
	</script>
	
</html>